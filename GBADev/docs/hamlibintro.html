<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HAM Documentation</title>
<link href="hamdoc.css" rel="stylesheet" type="text/css">
</head><body>



<table width=100% border=0 cellpadding=0 cellspacing=0
  bgcolor=#FFFFFF><tr><td width=154 align=left><a
  href="http://www.ngine.de"><img src="head-left.jpg"
  border="0"></a></td><td background="head-mid.jpg"
  border="0">&nbsp;</td><td width=177 align=right><a
  href="http://www.ngine.de"><img src="head-right.jpg"
  border="0"></a><img src="head-rightest.jpg"
  border="0"></td></tr></table> <table width=100% align=center><td
  align="center" height="20" width="90%" bgcolor=#eeeeee><font
  class="topnav"><B>
<A href="http://www.ngine.de/index.php" class="topnav">Home</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Downloads" class="topnav">Downloads</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Your_Account" class="topnav">Your
  Account</a>
&nbsp;&middot;&nbsp;
<A href="http://www.ngine.de/modules.php?name=Submit_News" class="topnav">Submit News</a>
</B></font>
</td>
</tr>
</table>

  <table width=100% border=0>
  <tr>
  <td align=left>
  <font face=verdana size=+0>
  <a href="index.html">Documentation Homepage</a><br>
  <a href="modules.html">HAMLib reference</a><br>
  <a href="http://www.ngine.de/index.html">Back to HAM Homepage</a><br>
  </td>
  <td align=right>
  <a href=index.html><img border=0 align=right src=hamlogo.jpg></a>
  </td>
  </tr>
  </table>  
  <br clear=all><hr>
<!-- Generated by Doxygen 1.2.18 -->
<h1><a name="hamlibintro">HAMlib Introduction</a>
</h1><dl compact><dt><b>What is HAMlib?</b></dt><dd>
Very good question. HAMlib is a function library (unlike HAM itself, which is a library of Macros). A function library is linked to your Project at compile time, like the Standard C library.</dl><dl compact><dt><b>Why use HAMlib?</b></dt><dd>
The reason for the introduction of a second system was straightforward: The complexity of my own projects grew massively, and I kept writing special functions using Macros that handled rather complex tasks. I had to import these functions into every project I started, and it soon occured to me that a few things could be handled by a general library tailored specifically to the GBA hardware. This is when HAMlib was born.</dl><dl compact><dt><b>Where to find more information on HAMlib</b></dt><dd>
There are quite a few sources of information on HAMlib:<ul>
<li>the <a href="mailinglist.html#mailinglist">The HAM Email List</a><li>Aaron Rogers tutorials at <a href="http://www.aaronrogers.com">http://www.aaronrogers.com</a><li>the tutorials in this document<li>the Hamlib reference in this document</ul>
</dl><dl compact><dt><b>How does HAMlib work then, and how can I work with it?</b></dt><dd>
For really simple uses, you might want to check the <a href="tuthello.html#tuthello">Hello World Tutorial</a> and other tutorials available in this documentation.</dl>Want to get into the system bit deeper? You found the right place to read: HAMlib works much like the GBA itself. To recap your memory:
<p>
The GBA has, depending on its display mode, up to 4 layers of backgrounds ( see <a class="el" href="group__hamlib__tile.html">Tiled Mode Functions</a> ), which can be imagined like 4 Layers of glass you can put paint on. In addition to this, there is space for 128 Sprites (see <a class="el" href="group__hamlib__obj.html">Sprite Manipulation Functions</a> ).
<p>
The two main components of HAMlib are structures holding information about these 4 backgrounds, and on the 128 sprites that can be displayed. These structures are contained in two main arrays available as soon as ham_Init completes:
<p>
ham_bg[0] - ham_bg[3] (structures of type bg_info) ham_obj[0] - ham_obj[127] (structures of type obj_info)
<p>
A Background, to be of any use for the GBA, needs two components itself, called the TileSet and the Map. You need a Tileset that will contain 8*8 pixel graphics blocks, and a map that will tell the GBA hardware where you want which block to be placed.
<p>
Allocating these blocks at the right spots in the hardware can be a big pain, that why HAMlib introduces a complete memory manager that will do this job for you. You do not have to know about what is allocated where, as long as the RAM is not full.
<p>
I know this sounds really confusing, but it is not. Let us have a look at what a HAMlib bg entry (read: the information that HAM needs to display one of the 4 available background layers on the GBA) looks like: <div class="fragment"><pre>
typedef struct bg_info_typ
{
      map_info_ptr  mi;       // active map info for this BG
      tile_info_ptr ti;       // active tile info for this BG
          u16  mosaic;            // mosaic stat (0=off)
          u16  active;            // tells if BG should be active (0=off)
          u16  prio;              // priority of BG screen (0=highest,3=lowest)
      u8       is_rot_bg;      // tells the system if this is a rot/scale bg
      s16       x_scroll;      // in this place HAMlib stores scrolling info
      s16       y_scroll;          // same here
} bg_info,*bg_info_ptr;
</pre></div>
<p>
Most of the fields should be pretty obvious, but I want to quickly talk about the mi and ti members. These are the Tileset and Maps assigned to this BG. This needs to be set for the BG to work. Since Tilesets themselves can be quite different depending what color mode you are in, and map sets can be quite different depending if they are used on rotation screens or the like, these got their own objects.
<p>
So, how do you assign a tileset to a bg then? Easy! Just create a new tileset using a HAMlib function (for example <a class="el" href="group__hamlib__tile.html#a3">ham_InitTileSet()</a> ), it will return a pointer to the newly created tileset. Set the ham_bg[your_bg_no].ti member to this pointer and thats it. Same goes for the maps, just use <a class="el" href="group__hamlib__tile.html#a9">ham_InitMapSet()</a> .
<p>
There is a wealth of topics that could be covered here, such as the numerous sprite functions, but for now you will have to bear with the example sources provided and the complete reference manual for all HAMlib functions in this documentation.
<p>
  <br clear=all><hr>
  <font face=verdana size=+0>
  <a href="index.html">Documentation Homepage</a> | 
  <a href="modules.html">HAMLib reference</a> | 
  <a href="http://www.ngine.de/index.html">Back to HAM Homepage</a><br>
  <div align=right>
  <font size=-1>documentation created with <a href="http://www.doxygen.org">Doxygen</a>
  </body>
</html>
